<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Ronnie Ruchal – OT Tracker</title>

<style>
*{box-sizing:border-box}
body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI";background:#eef2f7}
.app{max-width:420px;margin:10px auto;background:#fff;border-radius:16px;padding:14px}
h2{text-align:center;margin:4px 0;color:#1e3a8a}
.sub{text-align:center;font-size:12px;color:#64748b;margin-bottom:10px}

label{font-size:13px;font-weight:600;color:#1e40af}
select,input,button{
  width:100%;
  height:44px;
  font-size:15px;
  padding:8px 10px;
  margin-top:4px;
  border-radius:12px;
  border:2px solid #3b82f6;
  touch-action:manipulation;
}
button{
  background:#2563eb;
  color:#fff;
  font-weight:700;
  border:none;
}
.row{margin-bottom:10px}

table{width:100%;border-collapse:collapse;margin-top:14px}
th,td{padding:6px;font-size:12px;border-bottom:1px solid #e5e7eb;text-align:center}
th{color:#94a3b8}
.badge{font-size:11px;padding:2px 6px;border-radius:6px;background:#e5e7eb}
.del{background:#fee2e2;color:#dc2626;border:none;padding:4px 6px;border-radius:6px}

.report{
  background:#0f172a;
  color:#fff;
  padding:12px;
  border-radius:14px;
  margin-top:16px;
}
.report h3{margin:0 0 8px 0;font-size:14px}
.green{color:#4ade80;font-weight:800;font-size:22px}

.footer{text-align:center;font-size:11px;color:#94a3b8;margin-top:14px}
</style>
</head>

<body>
<div class="app">
<h2>Ronnie Ruchal</h2>
<div class="sub">OT & Salary Tracker • v1.3.0</div>

<div class="row">
<label>Date</label>
<select id="dateSel"></select>
</div>

<div class="row">
<label>Day Type</label>
<select id="day">
  <option value="weekday">Weekday (Mon–Fri)</option>
  <option value="saturday">Saturday</option>
  <option value="sunday">Sunday</option>
  <option value="holiday">Public Holiday</option>
</select>
</div>

<div class="row" id="workedRow" style="display:none">
<label>Worked Today?</label>
<select id="worked">
  <option value="yes">Yes</option>
  <option value="no">No</option>
</select>
</div>

<div class="row" id="timeRow">
<label>Out Time</label>
<select id="out">
<option value="">Select</option>
<option value="18:00">6:00</option>
<option value="18:30">6:30</option>
<option value="19:00">7:00</option>
<option value="19:30">7:30</option>
<option value="20:00">8:00</option>
<option value="20:30">8:30</option>
<option value="21:00">9:00</option>
<option value="21:30">9:30</option>
<option value="22:00">10:00</option>
<option value="22:30">10:30</option>
<option value="23:00">11:00</option>
<option value="23:30">11:30</option>
<option value="24:00">12:00</option>
</select>
</div>

<button onclick="save()">Save Day</button>

<table>
<thead>
<tr><th>Date</th><th>Day</th><th>Status</th><th>Hours</th><th></th></tr>
</thead>
<tbody id="list"></tbody>
</table>

<div class="report">
<h3>Monthly Report</h3>
<div id="counts"></div>

<label style="margin-top:8px;display:block">Hourly Rate (₩)</label>
<input type="number" id="rate" value="11500">

<button onclick="calc()">Calculate Salary</button>
<div class="green" id="salary"></div>

<button style="margin-top:6px;background:#dc2626" onclick="resetMonth()">Reset This Month</button>
</div>

<div class="footer">Ronnie Ruchal • Payroll System</div>
</div>

<script>
const KEY="ronnie_v130";
const dateSel=document.getElementById("dateSel");

for(let i=0;i<4;i++){
 let d=new Date();d.setDate(d.getDate()-i);
 let v=d.toISOString().slice(0,10);
 let t=i==0?"Today":i+" day ago";
 dateSel.innerHTML+=`<option value="${v}">${t} (${v})</option>`;
}

day.onchange=()=>{
 workedRow.style.display=["saturday","sunday","holiday"].includes(day.value)?"block":"none";
};
worked.onchange=()=>timeRow.style.display=worked.value==="yes"?"block":"none";

function hours(out){
 let m=out==="24:00"?1440:+out.split(":")[0]*60+ +out.split(":")[1];
 return Math.max(0,(m-(17*60+30))/60);
}

function save(){
 let data=JSON.parse(localStorage.getItem(KEY))||[];
 let date=dateSel.value;
 if(data.find(d=>d.date===date)){alert("Already saved");return;}
 let h=0,status="No Work";
 if(["saturday","sunday","holiday"].includes(day.value)){
   if(worked.value==="yes"){h=hours(out.value);status="Worked";}
 }else{
   h=hours(out.value);status=h>0?"OT":"No OT";
 }
 data.push({id:Date.now(),date,day:day.value,status,h});
 localStorage.setItem(KEY,JSON.stringify(data));
 render();
}

function render(){
 let data=JSON.parse(localStorage.getItem(KEY))||[];
 list.innerHTML="";
 data.forEach(d=>{
 list.innerHTML+=`<tr>
 <td>${d.date}</td>
 <td>${d.day}</td>
 <td><span class="badge">${d.status}</span></td>
 <td>${d.h.toFixed(2)}</td>
 <td><button class="del" onclick="del(${d.id})">Del</button></td>
 </tr>`;
 });
 report();
}

function del(id){
 let data=JSON.parse(localStorage.getItem(KEY))||[];
 data=data.filter(d=>d.id!==id);
 localStorage.setItem(KEY,JSON.stringify(data));
 render();
}

function report(){
 let data=JSON.parse(localStorage.getItem(KEY))||[];
 let c={sat:0,sun:0,hol:0,ot:0};
 data.forEach(d=>{
 if(d.day==="saturday"&&d.status==="Worked")c.sat++;
 if(d.day==="sunday"&&d.status==="Worked")c.sun++;
 if(d.day==="holiday"&&d.status==="Worked")c.hol++;
 if(d.day==="weekday")c.ot+=d.h;
 });
 counts.innerHTML=
 `Weekday OT hours: ${c.ot.toFixed(2)}<br>
  Saturday worked: ${c.sat}<br>
  Sunday worked: ${c.sun}<br>
  Public holiday: ${c.hol}`;
}

function calc(){
 let r=+rate.value;
 let data=JSON.parse(localStorage.getItem(KEY))||[];
 let total=0;
 data.forEach(d=>{
 if(d.day==="weekday") total+=d.h*r*1.5;
 if(d.day==="saturday"&&d.status==="Worked") total+=8*r*1.5;
 if(d.day==="holiday"&&d.status==="Worked") total+=8*r*1.5;
 if(d.day==="sunday"&&d.status==="Worked") total+=d.h*r*1.5;
 if(d.day==="sunday"&&d.status==="No Work") total+=8*r;
 });
 salary.innerText="₩ "+Math.round(total);
}

function resetMonth(){
 if(!confirm("Reset this month data?"))return;
 localStorage.removeItem(KEY);
 render();
}
render();
</script>
</body>
</html>
